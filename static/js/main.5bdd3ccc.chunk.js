(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{11:function(e,a,s){e.exports={formWrapper:"Register_formWrapper__351-U",form:"Register_form__3VOM7",field:"Register_field__2WTuh",regLink:"Register_regLink__19jP8",link:"Register_link__WNOOl",button:"Register_button__Bsnv0",error:"Register_error__3f_jm",errorField:"Register_errorField__1mo4q"}},20:function(e,a,s){e.exports={messageBlock:"Message_messageBlock__3Nwtr",mine:"Message_mine__1egLS",inner:"Message_inner__2Bs_D",reverse:"Message_reverse__2PnIA",message:"Message_message__1fZ9B",author:"Message_author__OaQID",info:"Message_info__2f2ST",userEmail:"Message_userEmail__1GRJ_"}},21:function(e,a,s){e.exports={formWrapper:"Auth_formWrapper__1_NnP",form:"Auth_form__13J8J",field:"Auth_field__3t-VT",regLink:"Auth_regLink__XDlHk",link:"Auth_link__qUhnP",error:"Auth_error__1QKgX",errorField:"Auth_errorField__cly13"}},31:function(e,a,s){e.exports={footer:"Footer_footer__BnOqL",form:"Footer_form__3HKpk",inputWrapper:"Footer_inputWrapper__3Isyr",input:"Footer_input__3hNpB",button:"Footer_button__ppc2t"}},33:function(e,a,s){e.exports={chat:"Chat_chat__1qsMx",header:"Chat_header__2Pw4s",exit:"Chat_exit__10UjC"}},35:function(e,a,s){e.exports={modalOverlay:"Modal_modalOverlay__3fGVa",modal:"Modal_modal__bZj0w",btnClose:"Modal_btnClose__2MJnV",modalInner:"Modal_modalInner__1t0u8"}},48:function(e,a,s){e.exports={position:"Loader_position___yTA3",lds_ellipsis:"Loader_lds_ellipsis__xfobW","lds-ellipsis1":"Loader_lds-ellipsis1__3F84-","lds-ellipsis2":"Loader_lds-ellipsis2__2Aer-","lds-ellipsis3":"Loader_lds-ellipsis3__2nRwa"}},53:function(e,a,s){},57:function(e,a,s){e.exports={messages:"Messages_messages__1DP0q",counter:"Messages_counter__2oEYj"}},79:function(e,a,s){"use strict";s.r(a);var t=s(1),r=s(37),n=s.n(r),i=(s(53),s(17)),c=s(6),o=s(46);s(80);o.a.initializeApp({apiKey:"AIzaSyDJXPA2OrU9pXPltyT5nCYkWzRcBTOiaOQ",authDomain:"online-chat-59c21.firebaseapp.com",databaseURL:"https://online-chat-59c21-default-rtdb.firebaseio.com",projectId:"online-chat-59c21",storageBucket:"online-chat-59c21.appspot.com",messagingSenderId:"554667159845",appId:"1:554667159845:web:a1a578840160138072aacc",measurementId:"G-L7KE7B7KLS"});var l=o.a,d=(s(45),s(30)),u=s(63),m=s(34),j=s(39),b="UPDATE-MESSAGES",p="UPDATE-CURRENT-USER",h={messages:[],currentUser:{}},_=Object(j.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case b:return Object(m.a)(Object(m.a)({},e),{},{messages:Object(u.a)(a.messages)});case p:return Object(m.a)(Object(m.a)({},e),{},{currentUser:{uid:a.uid}});default:return e}}));window.store=_;var f,g,O,x=_,v=s(33),w=s.n(v),N=s(2),I=function(e){return Object(N.jsx)("div",{className:w.a.header,children:Object(N.jsx)("button",{onClick:e.logOut,className:w.a.exit,children:"\u0412\u044b\u0439\u0442\u0438"})})},k=s(57),E=s.n(k),y=s(20),A=s.n(y),M=function(e){return Object(N.jsx)("div",{className:"".concat(A.a.messageBlock," ").concat(e.userId===e.currentUserId?"".concat(A.a.mine):""),children:Object(N.jsxs)("div",{className:"".concat(A.a.inner," ").concat(e.userId===e.currentUserId?"".concat(A.a.reverse):""),children:[Object(N.jsx)("div",{className:"".concat(A.a.author," ").concat(e.userId===e.currentUserId?"".concat(A.a.mine):""),children:e.userEmail[0]}),Object(N.jsxs)("div",{className:"".concat(A.a.info," ").concat(e.userId===e.currentUserId?"".concat(A.a.mine):""),children:[Object(N.jsx)("div",{className:A.a.message,children:e.message}),Object(N.jsx)("div",{className:A.a.userEmail,children:e.userEmail})]})]})})},P=s(48),S=s.n(P),U=function(){return Object(N.jsx)("div",{className:S.a.position,children:Object(N.jsxs)("div",{className:S.a.lds_ellipsis,children:[Object(N.jsx)("div",{}),Object(N.jsx)("div",{}),Object(N.jsx)("div",{}),Object(N.jsx)("div",{})]})})},C=Object(d.b)((function(e){return{messages:e.messages,id:e.currentUser.uid}}),{updateMessages:function(e){return{type:b,messages:e}}})((function(e){var a=Object(t.useState)(!0),s=Object(i.a)(a,2),r=s[0],n=s[1];Object(t.useEffect)((function(){var a=l.firestore().collection("messages").orderBy("date","asc").limitToLast(15).onSnapshot((function(a){var s=[];a.forEach((function(e){return s.push({userId:e.data().userId,message:e.data().message,userEmail:e.data().userEmail,mesId:e.data().date.seconds})})),e.updateMessages(s),n(!1)}));return function(){a()}}),[]);var c=Object(t.useRef)(null);return c.current&&setTimeout((function(){c.current.scrollTop=c.current.scrollHeight}),1),Object(N.jsx)("div",{className:E.a.messages,ref:c,children:r?Object(N.jsx)(U,{}):e.messages.map((function(a){return Object(N.jsx)(M,{userId:a.userId,message:a.message,currentUserId:e.id,userEmail:a.userEmail},a.mesId)}))})})),L=s(31),R=s.n(L),T=s.p+"static/media/mail.24835219.svg",F=function(e){var a=Object(t.useState)(""),s=Object(i.a)(a,2),r=s[0],n=s[1];return Object(N.jsx)("div",{className:R.a.footer,children:Object(N.jsxs)("form",{onSubmit:function(a){return function(a,s){a.preventDefault(),s&&(l.firestore().collection("messages").add({userEmail:e.userEmail,message:s,userId:e.uid,date:new Date}).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){console.error("Error adding document: ",e)})),n(""))}(a,r)},className:R.a.form,children:[Object(N.jsx)("div",{className:R.a.inputWrapper,children:Object(N.jsx)("input",{value:r,onChange:function(e){return n(e.target.value)},className:R.a.input,type:"text"})}),Object(N.jsx)("button",{className:R.a.button,children:Object(N.jsx)("img",{src:T,alt:""})})]})})},W=Object(d.b)((function(e){return{id:e.currentUser.uid}}),{updateCurrentUser:function(e){return{type:p,uid:e}}})((function(e){var a=Object(t.useState)(""),s=Object(i.a)(a,2),r=s[0],n=s[1],o=Object(t.useState)(!1),d=Object(i.a)(o,2),u=d[0],m=d[1];Object(t.useEffect)((function(){l.auth().onAuthStateChanged((function(a){a&&a.emailVerified?m(!1):m(!0),e.updateCurrentUser(a.uid),n(a.email)}))}),[]);return u?Object(N.jsx)(c.a,{to:"/auth"}):Object(N.jsxs)("div",{className:w.a.chat,children:[Object(N.jsx)(I,{logOut:function(){l.auth().signOut()}}),Object(N.jsx)(C,{}),Object(N.jsx)(F,{uid:e.id,userEmail:r})]})})),D=s(23),B=s(19),V=s(21),q=s.n(V),J=s(42),z=s(43),G=z.a.div(f||(f=Object(J.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height:45%;\n  padding-top: 30px;\n  img{\n    width:260px;\n    height: 260px;\n  }\n"]))),K=z.a.button(g||(g=Object(J.a)(['\n  display: block;\n  width: 80%;\n  margin: 25px auto;\n  height: 45px;\n  padding: 5px 15px;\n  border-radius: 10px;\n  color: white;\n  font-size:18px;\n  background: rgb(150,115,230);\n  background: -moz-linear-gradient(270deg, rgba(150,115,230,1) 0%, rgba(115,128,230,1) 100%);\n  background: -webkit-linear-gradient(270deg, rgba(150,115,230,1) 0%, rgba(115,128,230,1) 100%);\n  background: linear-gradient(270deg, rgba(150,115,230,1) 0%, rgba(115,128,230,1) 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#9673e6",endColorstr="#7380e6",GradientType=1);\n']))),X=z.a.h1(O||(O=Object(J.a)(["\n  color: white;\n  font-size: 24px;\n  font-weight: 700;\n  letter-spacing: 1.5px;\n"]))),Z=s.p+"static/media/logo.9856b63b.png",H=s(25),Q=s(27),Y=s.n(Q),$=function(e){var a;return e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(a="Invalid email address"):a="The email field is required",a},ee=function(e){var a="";return e?e.length<8?a="Password must be 8 characters long.":/(?=.*[0-9])/.test(e)||(a="Invalid password. Must contain one number."):a="The password field is required",a},ae=function(){var e=Object(t.useState)(!1),a=Object(i.a)(e,2),s=a[0],r=a[1];return s?Object(N.jsx)(c.a,{to:"/"}):Object(N.jsxs)("div",{className:q.a.formWrapper,children:[Object(N.jsx)(G,{children:Object(N.jsx)("img",{src:Z,alt:""})}),Object(N.jsx)(B.c,{initialValues:{password:"",email:""},onSubmit:function(e){var a,s;a=e.email,s=e.password,l.auth().signInWithEmailAndPassword(a.trim(),s.trim()).then((function(e){var a=e.user;a&&a.emailVerified?r(!0):alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0430 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430!")})).catch((function(e){alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0430 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430!")}))},children:function(e){var a=e.errors,s=e.touched;return Object(N.jsxs)(B.b,{className:q.a.form,children:[Object(N.jsx)(X,{children:"Login"}),Object(N.jsx)(B.a,{name:"email",validate:$,className:Y()(q.a.field,Object(D.a)({},q.a.errorField,a.email&&s.email)),placeholder:"Email"}),a.email&&s.email&&Object(N.jsx)("div",{className:q.a.error,children:a.email}),Object(N.jsx)(B.a,{name:"password",type:"password",validate:ee,className:Y()(q.a.field,Object(D.a)({},q.a.errorField,a.password&&s.password)),placeholder:"Password"}),a.password&&s.password&&Object(N.jsx)("div",{className:q.a.error,children:a.password}),Object(N.jsx)("div",{children:Object(N.jsxs)("p",{className:q.a.regLink,children:["Don't have an account? ",Object(N.jsx)(H.b,{className:q.a.link,to:"/register",children:"Sign up"})," "]})}),Object(N.jsx)(K,{type:"submit",children:"Login"})]})}})]})},se=s(11),te=s.n(se),re=s(35),ne=s.n(re),ie=function(e){return Object(N.jsx)("div",{className:ne.a.modalOverlay,children:Object(N.jsxs)("div",{className:ne.a.modal,children:[Object(N.jsx)("button",{className:ne.a.btnClose,onClick:e.closeModal,children:"\xd7"}),Object(N.jsx)("div",{className:ne.a.modalInner,children:"A message has been sent to the email you provided. Follow the link in the message and come back"})]})})},ce=function(){var e=Object(t.useState)(!1),a=Object(i.a)(e,2),s=a[0],r=a[1];return Object(N.jsxs)("div",{className:te.a.formWrapper,children:[s&&Object(N.jsx)(ie,{closeModal:function(){r(!1),setTimeout((function(){c.a}),1e3)}}),Object(N.jsx)(G,{children:Object(N.jsx)("img",{src:Z,alt:""})}),Object(N.jsx)(B.c,{initialValues:{password:"",email:"",confirmPassword:""},onSubmit:function(e){!function(e,a){try{l.auth().createUserWithEmailAndPassword(e,a).then((function(e){e.user.sendEmailVerification().then((function(){r(!0),console.log("emal sent")})).catch((function(e){alert(e)}))}))}catch(s){throw alert(s.message),s}}(e.email,e.password)},children:function(e){var a=e.errors,s=e.touched,t=e.values;return Object(N.jsxs)(B.b,{className:te.a.form,children:[Object(N.jsx)(X,{children:"Registration"}),Object(N.jsx)(B.a,{name:"email",validate:$,className:Y()(te.a.field,Object(D.a)({},te.a.errorField,a.email&&s.email)),placeholder:"Email"}),a.email&&s.email&&Object(N.jsx)("div",{className:te.a.error,children:a.email}),Object(N.jsx)(B.a,{name:"password",type:"password",validate:ee,className:Y()(te.a.field,Object(D.a)({},te.a.errorField,a.password&&s.password)),placeholder:"Password"}),a.password&&s.password&&Object(N.jsx)("div",{className:te.a.error,children:a.password}),Object(N.jsx)(B.a,{type:"password",className:Y()(te.a.field,Object(D.a)({},te.a.errorField,a.confirmPassword&&s.confirmPassword)),placeholder:"Confirm password",name:"confirmPassword",validate:function(e){return function(e,a){var s="";return e&&a?e!==a&&(s="Password not matched"):a||(s="Confirm password"),s}(t.password,e)}}),a.confirmPassword&&s.confirmPassword&&Object(N.jsx)("div",{className:te.a.error,children:a.confirmPassword}),Object(N.jsx)("div",{children:Object(N.jsxs)("p",{className:te.a.regLink,children:["Have an account? ",Object(N.jsx)(H.b,{className:te.a.link,to:"/auth",children:"Sign in"})," "]})}),Object(N.jsx)(K,{type:"submit",children:"Sign up"})]})}})]})},oe=function(){return Object(N.jsxs)("div",{className:"App",children:[!1,Object(N.jsx)(c.b,{path:"/auth",component:ae}),Object(N.jsx)(c.b,{path:"/register",component:ce}),Object(N.jsx)(c.b,{path:"/",component:W})]})};n.a.render(Object(N.jsx)(H.a,{children:Object(N.jsx)(d.a,{store:x,children:Object(N.jsx)(oe,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.5bdd3ccc.chunk.js.map